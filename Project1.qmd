---
title: "Project1"
format: pdf
editor: visual
---

##Step 1: Select columns

```{r}
library(dplyr)
library(tidyr)

first_data <- read.csv('EDU01a.csv')


selected_columns <- first_data |> 
  select(Area_name,STCOU,ends_with("D")) 

```


##Step 2: Covert data into long format 

```{r}

pivoted_data <- selected_columns |>
  pivot_longer(cols=3:12,names_to="Enrollment", values_to ="Enrollment_Value") 

print(pivoted_data)
```


##Step 3: Seperate Enrollment Variable

```{r}

long_updated <- pivoted_data |>
   mutate(Survey = substr(Enrollment, 1,7), Year = as.numeric(substr(Enrollment, 8,9))) |>
  mutate(Year=ifelse(Year>80, 1900+Year,2000+Year)) |>
  select(Area_name, STCOU, Survey, Year, Enrollment_Value) |>
  print(n=5)

print(long_updated)

```

##Step 4: Create two new data sets: country_tibble and state_tibble 

```{r}
county_tibble <- long_updated|>
  filter(grepl(",",Area_name)) |> 
  mutate(county=grep(pattern =", \\w\\w", Area_name))

class(county_tibble) <- c("county", class(county_tibble))
  
print(county_tibble)

state_tibble <- long_updated|>
  filter(!grepl(",",Area_name)) |> 
  
print(state_tibble)
```


##Step 5: Create new variable that describes which state one of these country measurements correspondents to 

##Step 6: For non-county level tibble, create a variable called division 



